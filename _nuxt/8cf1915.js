(window.webpackJsonp=window.webpackJsonp||[]).push([[16,10],{391:function(e,t,r){"use strict";r.r(t);var n=r(1).a.extend({}),o=r(59),c=r(60),l=r.n(c),d=r(175),component=Object(o.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex pa-2 flex-column fill-height justify-center align-center"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"50"}})],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VProgressCircular:d.a})},588:function(e,t,r){"use strict";r.r(t);r(10),r(7),r(12),r(15),r(8),r(16);var n,o=r(9),c=r(2),l=(r(47),r(33),r(55),r(46),r(1)),d=r(411),f=r.n(d),v=r(69),h=r(92),x=r(189),m=r(391);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}!function(e){e.loading="loading",e.verificationNotice="verificationNotice",e.verificationSuccess="verificationSuccess",e.verificationError="verificationError",e.resetPassword="resetPassword"}(n||(n={}));var C=l.a.extend({components:{InitialLoadingIndicator:m.default},meta:{requiresAuth:!1},data:function(){return{state:n.loading,isBusy:!1,oobCode:"",valid:!0,passwordField:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length<=40||"Password must be less than 40 characters"},function(e){return e&&e.length>=6||"Password must be at least 6 characters"},function(e){return e===f.a.escape(e)||"<, >, &, ', \" and / are not allowed"}],errorMessage:"",successMessage:""}},head:function(){return{title:"Verification",meta:[{name:"Verification",content:"Ilyssa Hosting verification page"}]}},computed:y(y({},Object(v.c)({authUser:function(e){return e.authUser}})),Object(v.b)({isLoggedIn:"isLoggedIn"})),created:function(){if(void 0!==this.authUser){null===this.authUser&&this.$router.replace({path:"/login"});var e=this.$route.query;if(e.mode)"verifyEmail"===e.mode?(this.oobCode=e.oobCode,this.verifyEmail()):"resetPassword"===e.mode&&(this.oobCode=e.oobCode,this.state=n.resetPassword);else{if(this.authUser.emailVerified)return void this.$router.replace({path:"/dashboard"});this.state=n.verificationNotice}}},methods:{sendEmailVerification:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.errorMessage="",e.successMessage="",e.isBusy=!0,t.prev=3,!(r=e.$fire.auth.currentUser)){t.next=10;break}return t.next=8,r.sendEmailVerification();case 8:t.next=11;break;case 10:e.$router.replace({path:"/login"});case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),e.errorMessage="Something went wrong.",console.warn("[Verification] sendEmailVerification",t.t0);case 17:e.isBusy=!1;case 18:case"end":return t.stop()}}),t,null,[[3,13]])})))()},verifyEmail:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.errorMessage="",e.successMessage="",e.isBusy=!0,t.prev=3,e.oobCode){t.next=7;break}return e.errorMessage="The link was invalid.",t.abrupt("return");case 7:return t.next=9,e.$fire.auth.checkActionCode(e.oobCode);case 9:if(r=t.sent,!(o=e.$fire.auth.currentUser)){t.next=23;break}if("VERIFY_EMAIL"===r.operation&&r.data.email===o.email){t.next=17;break}return e.state=n.verificationError,e.errorMessage="The link was invalid.",e.isBusy=!1,t.abrupt("return");case 17:return t.next=19,e.$fire.functions.httpsCallable(h.d.verifyEmail)();case 19:t.sent.data?e.state=n.verificationSuccess:e.state=n.verificationError,t.next=24;break;case 23:e.$router.replace({path:"/login"});case 24:t.next=31;break;case 26:t.prev=26,t.t0=t.catch(3),"auth/expired-action-code"===(c=t.t0.code)?e.errorMessage="The link is expired.":"auth/invalid-action-code"===c?e.errorMessage="The link was invalid.":"auth/user-not-found"===c&&(e.errorMessage="This user no longer exists."),e.state=n.verificationError;case 31:e.isBusy=!1;case 32:case"end":return t.stop()}}),t,null,[[3,26]])})))()},confirmNewPassword:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.errorMessage="",e.successMessage="",e.isBusy=!0,t.prev=3,e.oobCode){t.next=10;break}return e.errorMessage="The link was invalid.",e.isBusy=!1,t.abrupt("return");case 10:return t.next=12,e.$fire.auth.confirmPasswordReset(e.oobCode,e.passwordField);case 12:return t.next=14,e.$fire.functions.httpsCallable(h.d.resetPassword)({password:e.passwordField});case 14:e.successMessage="Your password has been changed successfully",setTimeout((function(){e.isBusy=!1,e.$router.replace({path:"/dashboard"})}),1e3);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),"auth/expired-action-code"===(r=t.t0.code)?e.errorMessage="The link is expired.":"auth/invalid-action-code"===r?e.errorMessage="The link was invalid.":"auth/user-not-found"===r&&(e.errorMessage="This user no longer exists.");case 22:e.isBusy=!1;case 23:case"end":return t.stop()}}),t,null,[[3,18]])})))()},goToHome:function(){window.location.replace(x.a.baseUrl)}}}),k=r(59),_=r(60),O=r.n(_),M=r(250),j=r(413),P=r(414),E=r(582),B=r(176),V=r(149),$=r(415),component=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return"loading"===e.state?r("initial-loading-indicator"):r("div",{staticClass:"d-flex flex-column fill-height justify-center align-center"},[r("v-card",{staticClass:"pa-sm-6",attrs:{"max-width":"400",width:"95%"}},[r("div",{staticClass:"d-flex pa-2 flex-grow-1 justify-center align-center"},[r("v-img",{staticClass:"pa-1 mb-1",attrs:{alt:"logo",src:"/assets/logo.svg",contain:"",width:"40%",height:"auto"}})],1),e._v(" "),r("v-divider",{staticClass:"py-1"}),e._v(" "),"verificationNotice"===e.state?r("div",{staticClass:"d-flex flex-column flex-grow-1 text-center "},[r("span",{staticClass:"my-6 text-center text-h6"},[e._v("An email has been sent for verification. Please verify your email before continuing.")]),e._v(" "),r("v-btn",{staticClass:"ma-2 pa-6 text-none text-body-1 accent--text font-weight-bold",attrs:{color:"primary",disabled:e.isBusy,loading:e.isBusy},on:{click:e.sendEmailVerification}},[e._v("\n        Send another verification\n      ")])],1):"verificationSuccess"===e.state?r("div",{staticClass:"d-flex flex-column flex-grow-1 text-center "},[r("span",{staticClass:"my-6 text-center text-h6"},[e._v("Your email is verified successfully.")]),e._v(" "),r("v-btn",{staticClass:"ma-2 pa-6 text-none text-body-1 accent--text font-weight-bold",attrs:{color:"primary",disabled:e.isBusy,loading:e.isBusy},on:{click:e.goToHome}},[e._v("\n        Continue\n      ")])],1):"verificationError"===e.state?r("div",{staticClass:"d-flex flex-column flex-grow-1 text-center "},[r("span",{staticClass:"ma-2 my-6 text-center text-h6"},[e._v("Verification failed.")]),e._v(" "),r("v-btn",{staticClass:"ma-2 pa-6 text-none text-body-1 accent--text font-weight-bold",attrs:{color:"primary",disabled:e.isBusy,loading:e.isBusy},on:{click:e.sendEmailVerification}},[e._v("\n        Send another verification\n      ")])],1):r("div",{staticClass:"d-flex flex-column flex-grow-1 text-center "},[r("span",{staticClass:"my-2 text-center text-h6"},[e._v("Please enter a new password")]),e._v(" "),r("v-form",{ref:"form",staticClass:"ma-2",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.passwordRules,label:"New password",color:"primary","background-color":"white",disabled:e.isBusy,outlined:"",type:"password"},model:{value:e.passwordField,callback:function(t){e.passwordField=t},expression:"passwordField"}}),e._v(" "),r("div",{staticClass:"d-flex flex-column my-2 text-center"},[r("v-btn",{staticClass:"my-2 pa-6 text-none text-body-1 accent--text font-weight-bold",attrs:{loading:e.isBusy,color:"primary","min-width":"140",block:"",disabled:!e.valid},on:{click:e.confirmNewPassword}},[e._v("\n            Change password\n          ")])],1)],1)],1),e._v(" "),e.errorMessage?r("div",{staticClass:"ma-2 pa-2 text-center"},[r("v-icon",{attrs:{color:"error"}},[e._v("\n        mdi-alert-circle-outline\n      ")]),e._v(" "),r("span",{staticClass:"text-center text-body-2 error--text text--darken-1"},[e._v(e._s(e.errorMessage))])],1):e._e(),e._v(" "),e.successMessage?r("div",{staticClass:"ma-2 pa-2 text-center"},[r("v-icon",{attrs:{color:"success"}},[e._v("\n        mdi-check-circle-outline\n      ")]),e._v(" "),r("span",{staticClass:"text-center text-body-2 success--text text--darken-1"},[e._v(e._s(e.successMessage))])],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;O()(component,{InitialLoadingIndicator:r(391).default}),O()(component,{VBtn:M.a,VCard:j.a,VDivider:P.a,VForm:E.a,VIcon:B.a,VImg:V.a,VTextField:$.a})}}]);